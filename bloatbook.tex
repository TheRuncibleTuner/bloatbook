\documentclass[twoside,11pt,letterpaper]{newphstyle}
%\documentclass[a5]{book}


% this file has a bunch of tweaks to the margins and stuff
\input{frontmatter/bookstyles}





%% marginpar update
\setlength{\marginparwidth}{1.2in}
\let\oldmarginpar\marginpar
%\renewcommand\marginpar[1]{\-\oldmarginpar[\raggedleft\footnotesize #1]%
%{\raggedright\footnotesize #1}}
\renewcommand\marginpar[1]{}
%% marginpar update



\usepackage{xspace} % this macro magically adds a space, or not, after a word
\usepackage{comment} % for \begin{comment} blocks
\usepackage{booktabs} % for \toprule \bottomrule etc.
\usepackage{colortbl} % for colored cells, not sure if we need this?
\usepackage{multirow} % so that table cells can span multiple rows
\usepackage{subfigure} % subfigures and subtables support
\usepackage{graphicx} % this helps us \includegraphics pdf files and the like



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%                                       %%%%%%
%%%%%% MACRO for thread-local storage        %%%%%%
%%%%%%       maybe thread local storage?     %%%%%%
%%%%%%                                       %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\tls{thread-local storage\xspace}
\def\Tls{Thread-local storage\xspace}
\def\TLS{Thread-local Storage\xspace}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%                                       %%%%%%
%%%%%% MACRO for JRE                         %%%%%%
%%%%%%       maybe JVM instead?              %%%%%%
%%%%%%                                       %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\jre{JRE\xspace}
\def\jres{JREs\xspace}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%                                       %%%%%%
%%%%%% MACRO for code and class              %%%%%%
%%%%%%       currently typewriter font       %%%%%%
%%%%%%                                       %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\class}[1]{{\texttt{#1}\xspace}}
\newcommand{\code}[1]{\class{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%                                       %%%%%%
%%%%%%  Stuff necessary to make the index    %%%%%%
%%%%%%                                       %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{makeidx} 
\makeindex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\usepackage{hyperref} \hypersetup{pdfauthor={Nick Mitchell, Edith
    Schonberg, Gary Sevitsky},pdftitle={Memory Conscious Java
    Programming},linkcolor=black,citecolor=black,filecolor=black,urlcolor=black,colorlinks=true} \def\chapterautorefname{Chapter} \def\sectionautorefname{Section} \def\subsectionautorefname{Section}
    
%\usepackage{float}
%  \floatstyle{ruled}
%  \newfloat{callout}{thp}{lop}
%  \floatname{callout}{Things To Remember}



%%% [NMM} this goofy defines a subfloat environment that lets us have verbatim
% and shortlistings inside of subfigures (begin subfloat, begin minipage, then
% begin verbatim)
\newcommand{\subfigureautorefname}{\figureautorefname}
\newbox\subfigbox \makeatletter
\newenvironment{subfloat} {\def\caption##1{\gdef\subcapsave{\relax##1}}%
\let\subcapsave\@empty \setbox\subfigbox\hbox
\bgroup} {\egroup
\subfigure[\subcapsave]{\box\subfigbox}} \makeatother
%%%


\usepackage{color}
\definecolor{Light}{gray}{.95}
\definecolor{Lighter}{gray}{.50}

\newtheorem{definition}{Definition}
%\usepackage{amsthm}
%{
  %\theoremstyle{definition}
  %\newtheorem{example}{Example}
  %\newenvironment{example}[1]{\textbf{Example: #1}}{}
  
%\newcounter{Examplecount}[chapter]
%\setcounter{Examplecount}{1}
\newenvironment{example}[1]
{% This is the begin code
%\stepcounter{Examplecount}
 % \arabic{chapter}.\arabic{Examplecount}
%\noindent\minipage{\textwidth}
%\begin{center}
\vspace{3mm}%
%\nopagebreak%
%\hrule height \heavyrulewidth%
%\nopagebreak%
%\vspace{0.3mm}
%\nopagebreak%
%\hrule height \lightrulewidth%
%\nopagebreak%
%\vspace{2mm}%
%\nopagebreak\minipage{\textwidth}
\textbf{Example: #1}~~%
%\textbf{#1:}~~%
}
{% This is the end code
%\qed%
%\flushright $<$/example$>$%
%\endminipage
%\vspace{2mm}%
%\hrule height \lightrulewidth%
%\vspace{0.3mm}
%\hrule height \heavyrulewidth%
\vspace{3mm}%
%\end{center}
%\endminipage
}
  
%}

% the listings package gives us pretty nice support for formatted code listings
\usepackage{listings}
%\lstset{language=Java,basicstyle=\footnotesize\ttfamily,frame=tb,tabsize=4,captionpos=b,columns=flexible,breaklines}%},frame=single,backgroundcolor=\color{Light}}
\lstset{language=Java,basicstyle=\ttfamily,frame=tb,tabsize=4,captionpos=b,columns=flexible,breaklines}%},frame=single,backgroundcolor=\color{Light}}
\lstnewenvironment{shortlisting}{\quote\lstset{frame=none}}{\lstset{frame=tb}\endquote%
\vspace{-0.5\baselineskip}
}
\lstnewenvironment{figurelisting}{\lstset{frame=none}}{\lstset{frame=tb}%
\vspace{-0.5\baselineskip}
}
%\lstnewenvironment{longlisting}{}{}




\newcounter{ttr}
\setcounter{ttr}{1}

\newlength{\calloutparindent}
\setlength{\calloutparindent}{\parindent}
%%
%% begin: the callout command
\newcommand{\callout}[3]{\label{#1}\vspace{3mm}
\begin{center}
\fcolorbox{black}{Light}{\begin{minipage}{0.85\textwidth}
    %\textbf{\large Things To Remember~\arabic{ttr} --- #2}
    \textbf{\large #2}
    \vspace{0.5mm}
    \hrule height \heavyrulewidth
    \vspace{2mm}
\setlength{\parindent}{\calloutparindent}
#3
  \end{minipage}}
\end{center}
\vspace{3mm}
\addtocounter{ttr}{1}
}
\newcommand{\thingstoremember}[1]{Things To Remember~\ref{#1}}
%% end: the callout command
%%




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                            %%%%
%%%%     TITLE AND AUTHORS      %%%%
%%%%                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Building Memory Efficient Java Programs}
\author{Nick Mitchell \and Edith Schonberg \and Gary Sevitsky}
\date{}



\begin{document}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                            %%%%
%%%% THIS IS THE PREFACEY STUFF %%%%
%%%%                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter  % this is a necessary book macro
\maketitle    % insert the title
\include{frontmatter/preface} % the preface section
\tableofcontents
\listoffigures
\listoftables




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                            %%%%
%%%%  THIS IS THE BODY OF BOOK  %%%%
%%%%                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mainmatter  % this is a necessary book macro

\input{part1/part1}
\input{part2/part2}
\input{part3/part3}
\input{part4/part4}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                            %%%%
%%%%   THIS IS THE BACK STUFF   %%%%
%%%%                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{backmatter/appendices}
\backmatter % this is a necessary book macro

%\bibliographystyle{abbrv}
\bibliographystyle{ieeetr}
\bibliography{backmatter/bloat}

\printindex  % the book's index

\end{document}
